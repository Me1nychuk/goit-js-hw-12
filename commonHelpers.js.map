{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\n\n\nconst form = document.querySelector('.formForSearch');\nconst input = form.querySelector('.inputForSearch');\nconst button = form.querySelector('.btnForSearch');\nconst boxForContent = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a.lightbox');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.load');\n\n\nconst API_KEY = \"41507262-89b1b811a4183d0df8899cf35\";\n\nform.addEventListener('submit', function (e) {\n    e.preventDefault();\n    const searchTerm = input.value.trim();\n    showLoader();\n    if (searchTerm !== \"\") {\n        searchImages(searchTerm);\n    } else {\n         iziToast.error({\n         title: 'Error',\n         message: 'Please enter a search term.',  \n    });\n    hideLoader();\n    }\n    \n})\n\nbtnLoad.addEventListener('click', loadMoreImages);\nlet currentPage = 1;\nlet galleryItemHeight;\n\nasync function searchImages(query) {\n    currentPage = 1;\n\n   \n    const API_URL = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`;\n    \n\n    try {\n        const response = await axios.get(API_URL);\n        \n        const dataFromServer = response.data;\n        if (dataFromServer.hits.length > 0) {\n            iziToast.success({\n                title: 'OK',\n               message: 'We were able to fetch some data.!',\n               });\n               boxForContent.innerHTML = \"\";\n               displayImages(dataFromServer.hits);\n               lightbox.refresh();\n               if(dataFromServer.hits.length<40)btnLoad.style.display = 'none'; \n               const galleryItem = document.querySelector('.gallery-item'); \n               const itemHeight = galleryItem.getBoundingClientRect().height;\n                galleryItemHeight = itemHeight;\n                window.scrollBy({ top: galleryItemHeight * 0.55, behavior: \"smooth\", });\n            \n        }else{\n            iziToast.info({\n                title: 'Info',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n              });\n        }\n\n    } catch (error) {\n         iziToast.error({\n         title: 'Error',\n         message: 'Sorry, An error occurred while fetching images, Please try again later.',\n    });\n    } finally{\n        hideLoader();\n    }\n    \n}\n\nfunction displayImages(images){\n    \n\n    const newContent = images.map(e=>{\n        return  `<div class=\"gallery-item\">\n        <a href=\"${e.largeImageURL}\" class=\"lightbox\" data-lightbox=\"gallery\">\n        <img class=\"gallery-image\" src=\"${e.webformatURL}\" alt=\"${e.tags}\">\n        </a>\n        <div class=\"info\">\n            <div class=\"stat\">\n                <h3>Likes</h3>\n                <p>${e.likes}</p>\n            </div>\n            <div class=\"stat\">\n                <h3>Views</h3>\n                <p>${e.views }</p>\n            </div>\n            <div class=\"stat\">\n                <h3>Comments</h3>\n                <p>${e.comments }</p><p></p>\n            </div>\n            <div class=\"stat\">\n                <h3>Downloads</h3>\n                <p>${e.downloads }</p>\n            </div>\n        </div>\n        </div>`;\n    }).join('');\n    boxForContent.insertAdjacentHTML('beforeend', newContent);\n    btnLoad.style.display = 'block';\n\n}\n\nasync function loadMoreImages(){\n    currentPage++;\n    \n    const searchTerm = input.value.trim();\n    showLoader();\n\n    try {\n        const API_URL = `https://pixabay.com/api/?key=${API_KEY}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`;\n        \n        const response = await axios.get(API_URL);\n        const dataFromServer = response.data;\n         if(dataFromServer.hits.length>0){\n            iziToast.success({\n                title: 'OK',\n               message: 'We were able to fetch some data.!',\n               });\n               displayImages(dataFromServer.hits);\n               lightbox.refresh();\n               if(dataFromServer.hits.length<40)btnLoad.style.display = 'none'; \n               window.scrollBy({ top: galleryItemHeight * 2.5, behavior: \"smooth\", });\n         }else{\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n              });\n              btnLoad.style.display = 'none'; \n         }\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Error loading more images. Please try again later.',\n          });\n    }finally {\n        hideLoader();\n      }\n\n}\n\nfunction showLoader() {\n    loader.style.display = 'block'\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}"],"names":["form","input","boxForContent","lightbox","SimpleLightbox","loader","btnLoad","API_KEY","e","searchTerm","showLoader","searchImages","iziToast","hideLoader","loadMoreImages","currentPage","galleryItemHeight","query","API_URL","dataFromServer","axios","displayImages","images","newContent"],"mappings":"+vBASA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAQD,EAAK,cAAc,iBAAiB,EACnCA,EAAK,cAAc,eAAe,EACjD,MAAME,EAAgB,SAAS,cAAc,UAAU,EACvD,IAAIC,EAAW,IAAIC,EAAe,qBAAqB,EACvD,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,OAAO,EAGxCC,EAAU,qCAEhBP,EAAK,iBAAiB,SAAU,SAAUQ,EAAG,CACzCA,EAAE,eAAc,EAChB,MAAMC,EAAaR,EAAM,MAAM,KAAI,EACnCS,IACID,IAAe,GACfE,EAAaF,CAAU,GAEtBG,EAAS,MAAM,CACf,MAAO,QACP,QAAS,6BAClB,CAAK,EACDC,IAGJ,CAAC,EAEDP,EAAQ,iBAAiB,QAASQ,CAAc,EAChD,IAAIC,EAAc,EACdC,EAEJ,eAAeL,EAAaM,EAAO,CAC/BF,EAAc,EAGd,MAAMG,EAAU,gCAAgCX,OAAaU,kEAAsEF,gBAGnI,GAAI,CAGA,MAAMI,GAFW,MAAMC,EAAM,IAAIF,CAAO,GAER,KAC5BC,EAAe,KAAK,OAAS,GAC7BP,EAAS,QAAQ,CACb,MAAO,KACR,QAAS,mCACxB,CAAgB,EACDV,EAAc,UAAY,GAC1BmB,EAAcF,EAAe,IAAI,EACjChB,EAAS,QAAO,EACbgB,EAAe,KAAK,OAAO,KAAGb,EAAQ,MAAM,QAAU,QAGxDU,EAFmB,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEtD,OAAO,SAAS,CAAE,IAAKA,EAAoB,IAAM,SAAU,QAAQ,CAAG,GAG1EJ,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0EACzB,CAAe,CAGV,MAAC,CACGA,EAAS,MAAM,CACf,MAAO,QACP,QAAS,yEAClB,CAAK,CACL,QAAa,CACLC,GACH,CAEL,CAEA,SAASQ,EAAcC,EAAO,CAG1B,MAAMC,EAAaD,EAAO,IAAId,GAClB;AAAA,mBACGA,EAAE;AAAA,0CACqBA,EAAE,sBAAsBA,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,qBAK/CA,EAAE;AAAA;AAAA;AAAA;AAAA,qBAIFA,EAAE;AAAA;AAAA;AAAA;AAAA,qBAIFA,EAAE;AAAA;AAAA;AAAA;AAAA,qBAIFA,EAAE;AAAA;AAAA;AAAA,eAIlB,EAAE,KAAK,EAAE,EACVN,EAAc,mBAAmB,YAAaqB,CAAU,EACxDjB,EAAQ,MAAM,QAAU,OAE5B,CAEA,eAAeQ,GAAgB,CAC3BC,IAEA,MAAMN,EAAaR,EAAM,MAAM,KAAI,EACnCS,IAEA,GAAI,CACA,MAAMQ,EAAU,gCAAgCX,OAAaE,kEAA2EM,gBAGlII,GADW,MAAMC,EAAM,IAAIF,CAAO,GACR,KAC5BC,EAAe,KAAK,OAAO,GAC3BP,EAAS,QAAQ,CACb,MAAO,KACR,QAAS,mCACxB,CAAgB,EACDS,EAAcF,EAAe,IAAI,EACjChB,EAAS,QAAO,EACbgB,EAAe,KAAK,OAAO,KAAGb,EAAQ,MAAM,QAAU,QACzD,OAAO,SAAS,CAAE,IAAKU,EAAoB,IAAK,SAAU,QAAQ,CAAG,IAExEJ,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAe,EACDN,EAAQ,MAAM,QAAU,OAGjC,MAAC,CACEM,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oDACrB,CAAW,CACX,QAAK,CACGC,GACD,CAEP,CAEA,SAASH,GAAa,CAClBL,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASQ,GAAa,CAClBR,EAAO,MAAM,QAAU,MAC3B"}